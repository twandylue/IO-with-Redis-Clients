@page "/plots"

<PageTitle>Show plots about the system.</PageTitle>

@using Plotly.Blazor.Traces.ScatterLib
@using Plotly.Blazor
@using Plotly.Blazor.Traces

<h3>Plots</h3>

<PlotlyChart @bind-Config="config" @bind-Layout="layout" @bind-Data="data" @ref="chart"/>

// TODO: Need to find a way to add data to the chart.
@code {
    PlotlyChart chart;
    Config config = new Config();
    Layout layout = new Layout();
    // Using of the interface IList is important for the event callback!
    IList<ITrace> data = new List<ITrace>
    {
        new Scatter
        {
            Name = "ScatterTrace",
            Mode = ModeFlag.Lines | ModeFlag.Markers,
            X = new List<object>{1,2,3},
            Y = new List<object>{1,2,3}
        }
    };
    
    // private async Task AddData(int count = 100)
    // {
    //     if (!(chart.Data.FirstOrDefault() is Scatter scatter)) return;
    //     var (x, y) = Helper.GenerateData(scatter.X.Count + 1, scatter.X.Count + 1 + count);
    //
    //     await chart.ExtendTrace(x, y, data.IndexOf(scatter));
    // }
}
